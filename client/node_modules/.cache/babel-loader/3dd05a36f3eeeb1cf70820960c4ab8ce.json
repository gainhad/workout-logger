{"ast":null,"code":"import { createSlice, createSelector } from 'redux-starter-kit';\nimport { calculateE1RM } from '../../utils/calculations.js';\nconst initialState = {\n  lifts: [{\n    name: 'SQUAT',\n    sets: [{\n      weight: 255,\n      reps: 10,\n      rpe: 6\n    }, {\n      weight: 287,\n      reps: 7,\n      rpe: 7\n    }, {\n      weight: 287,\n      reps: 8,\n      rpe: 8\n    }]\n  }, {\n    name: 'DEADLIFT',\n    sets: []\n  }, {\n    name: 'BENCH PRESS',\n    sets: []\n  }],\n  currentLiftIndex: 0,\n  restTimer: {\n    timeStarted: NaN,\n    duration: NaN\n  },\n  timeStarted: 0\n};\n\nfunction addOrRenameLiftReducer(state, {\n  payload\n}) {\n  if (isNaN(payload.liftIndex)) {\n    state.lifts.unshift({\n      name: payload.name,\n      sets: []\n    });\n  } else {\n    state.lifts[payload.liftIndex].name = payload.name;\n  }\n}\n\nfunction deleteLiftReducer(state, {\n  payload\n}) {\n  state.lifts.splice(payload.index, 1);\n}\n\nfunction renameLiftReducer(state, {\n  payload\n}) {\n  state.lifts[payload.index].name = payload.name;\n}\n\nfunction addOrUpdateSetReducer(state, {\n  payload\n}) {\n  if (isNaN(payload.setIndex)) {\n    state.lifts[payload.liftIndex].sets.push(payload.set);\n  } else {\n    state.lifts[payload.liftIndex].sets[payload.setIndex] = payload.set;\n  }\n}\n\nfunction deleteSetReducer(state, {\n  payload\n}) {\n  state.lifts[payload.liftIndex].sets.splice(payload.setIndex, 1);\n}\n\nfunction updateSetReducer(state, {\n  payload\n}) {\n  state.lifts[payload.liftIndex].sets[payload.setIndex] = payload.updatedSet;\n}\n\nfunction incrementCurrentLiftIndexReducer(state) {\n  if (state.currentLiftIndex < state.lifts.length - 1) {\n    ++state.currentLiftIndex;\n  }\n}\n\nfunction decrementCurrentLiftIndexReducer(state) {\n  if (state.currentLiftIndex > 0) {\n    --state.currentLiftIndex;\n  }\n}\n\nfunction startRestTimer(duration) {\n  return {\n    type: 'currentWorkout/startRestTimer',\n    payload: {\n      timeStarted: Date.now(),\n      duration: duration\n    }\n  };\n}\n\nfunction startRestTimerReducer(state, {\n  payload\n}) {\n  state.restTimer = {\n    timeStarted: payload.timeStarted,\n    duration: payload.duration\n  };\n}\n\nfunction addTimeStartedReducer(state, {\n  payload\n}) {\n  state.timeStarted = payload;\n}\n\nconst currentWorkout = createSlice({\n  slice: 'currentWorkout',\n  initialState: initialState,\n  reducers: {\n    addOrRenameLift: addOrRenameLiftReducer,\n    deleteLift: deleteLiftReducer,\n    renameLift: renameLiftReducer,\n    addOrUpdateSet: addOrUpdateSetReducer,\n    deleteSet: deleteSetReducer,\n    updateSet: updateSetReducer,\n    incrementCurrentLiftIndex: incrementCurrentLiftIndexReducer,\n    decrementCurrentLiftIndex: decrementCurrentLiftIndexReducer,\n    startRestTimer: startRestTimerReducer\n  }\n}); // Selectors\n\nconst getCurrentLiftIndex = createSelector(['currentWorkout.currentLiftIndex'], index => index);\nconst getCurrentLift = createSelector(['currentWorkout.currentLiftIndex', 'currentWorkout.lifts'], (index, lifts) => lifts[index]);\nconst getSetsForCurrentLift = createSelector(['currentWorkout.currentLiftIndex', 'currentWorkout.lifts'], (index, lifts) => lifts[index].sets);\nconst atEnd = createSelector(['currentWorkout.currentLiftIndex', 'currentWorkout.lifts'], (index, lifts) => index === lifts.length - 1);\nconst atBeginning = createSelector(['currentWorkout.currentLiftIndex'], index => index === 0);\nconst getHeaviestSet = createSelector(['currentWorkout.currentLiftIndex', 'currentWorkout.lifts'], (index, lifts) => {\n  if (lifts[index].sets.length) {\n    return lifts[index].sets.reduce((setA, setB) => {\n      return setA.weight >= setB.weight ? setA : setB;\n    });\n  }\n});\nconst getEstimatedOneRepMax = createSelector([getHeaviestSet], set => {\n  if (set && set.rpe >= 6.5) {\n    return calculateE1RM(set.weight, set.reps, set.rpe);\n  }\n});\nconst actions = currentWorkout.actions,\n      reducer = currentWorkout.reducer; // Overwite generate actions with custom actions.\n\nactions.startRestTimer = startRestTimer;\nexport { getSetsForCurrentLift, getCurrentLiftIndex, getCurrentLift, atBeginning, atEnd, getEstimatedOneRepMax };\nexport { initialState, actions as currentWorkoutActions };\nexport default reducer;","map":{"version":3,"sources":["/Users/Hadley/src/workout-logger/src/redux/slices/currentWorkout.js"],"names":["createSlice","createSelector","calculateE1RM","initialState","lifts","name","sets","weight","reps","rpe","currentLiftIndex","restTimer","timeStarted","NaN","duration","addOrRenameLiftReducer","state","payload","isNaN","liftIndex","unshift","deleteLiftReducer","splice","index","renameLiftReducer","addOrUpdateSetReducer","setIndex","push","set","deleteSetReducer","updateSetReducer","updatedSet","incrementCurrentLiftIndexReducer","length","decrementCurrentLiftIndexReducer","startRestTimer","type","Date","now","startRestTimerReducer","addTimeStartedReducer","currentWorkout","slice","reducers","addOrRenameLift","deleteLift","renameLift","addOrUpdateSet","deleteSet","updateSet","incrementCurrentLiftIndex","decrementCurrentLiftIndex","getCurrentLiftIndex","getCurrentLift","getSetsForCurrentLift","atEnd","atBeginning","getHeaviestSet","reduce","setA","setB","getEstimatedOneRepMax","actions","reducer","currentWorkoutActions"],"mappings":"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","sourcesContent":["import { createSlice, createSelector } from 'redux-starter-kit';\nimport { calculateE1RM } from '../../utils/calculations.js';\n\nconst initialState = {\n  lifts: [\n    {\n      name: 'SQUAT',\n      sets: [\n        { weight: 255, reps: 10, rpe: 6 },\n        { weight: 287, reps: 7, rpe: 7 },\n        { weight: 287, reps: 8, rpe: 8 }\n      ]\n    },\n    { name: 'DEADLIFT', sets: [] },\n    { name: 'BENCH PRESS', sets: [] }\n  ],\n  currentLiftIndex: 0,\n  restTimer: {\n    timeStarted: NaN,\n    duration: NaN \n  },\n  timeStarted: 0\n};\n\n\nfunction addOrRenameLiftReducer(state, { payload }) {\n  if (isNaN(payload.liftIndex)) {\n    state.lifts.unshift({ name: payload.name, sets: [] });\n  } else {\n    state.lifts[payload.liftIndex].name = payload.name;\n  }\n}\n\nfunction deleteLiftReducer(state, { payload }) {\n  state.lifts.splice(payload.index, 1);\n}\n\nfunction renameLiftReducer(state, { payload }) {\n  state.lifts[payload.index].name = payload.name;\n}\n\nfunction addOrUpdateSetReducer(state, { payload }) {\n  if (isNaN(payload.setIndex)) {\n    state.lifts[payload.liftIndex].sets.push(payload.set);\n  } else {\n    state.lifts[payload.liftIndex].sets[payload.setIndex] = payload.set;\n  }\n}\n\nfunction deleteSetReducer(state, { payload }) {\n  state.lifts[payload.liftIndex].sets.splice(payload.setIndex, 1);\n}\n\nfunction updateSetReducer(state, { payload }) {\n  state.lifts[payload.liftIndex].sets[payload.setIndex] = payload.updatedSet;\n}\n\nfunction incrementCurrentLiftIndexReducer(state) {\n  if (state.currentLiftIndex < state.lifts.length - 1) {\n    ++state.currentLiftIndex;\n  }\n}\n\nfunction decrementCurrentLiftIndexReducer(state) {\n  if (state.currentLiftIndex > 0) {\n    --state.currentLiftIndex;\n  }\n}\n\nfunction startRestTimer(duration) {\n  return {\n    type: 'currentWorkout/startRestTimer',\n    payload: {\n      timeStarted: Date.now(),\n      duration: duration\n    }\n  }\n}\n\nfunction startRestTimerReducer(state, { payload }) {\n  state.restTimer = {\n    timeStarted: payload.timeStarted,\n    duration: payload.duration\n  };\n}\n\nfunction addTimeStartedReducer(state, { payload }) {\n  state.timeStarted = payload;\n}\n\nconst currentWorkout = createSlice({\n  slice: 'currentWorkout',\n  initialState: initialState,\n  reducers: {\n    addOrRenameLift: addOrRenameLiftReducer,\n    deleteLift: deleteLiftReducer,\n    renameLift: renameLiftReducer,\n    addOrUpdateSet: addOrUpdateSetReducer,\n    deleteSet: deleteSetReducer,\n    updateSet: updateSetReducer,\n    incrementCurrentLiftIndex: incrementCurrentLiftIndexReducer,\n    decrementCurrentLiftIndex: decrementCurrentLiftIndexReducer,\n    startRestTimer: startRestTimerReducer\n  },\n});\n\n// Selectors\nconst getCurrentLiftIndex = createSelector(\n  ['currentWorkout.currentLiftIndex'],\n  index => index\n);\n\nconst getCurrentLift = createSelector(\n  ['currentWorkout.currentLiftIndex', 'currentWorkout.lifts'],\n  (index, lifts) => lifts[index]\n);\n\nconst getSetsForCurrentLift = createSelector(\n  ['currentWorkout.currentLiftIndex', 'currentWorkout.lifts'],\n  (index, lifts) => lifts[index].sets\n);\n\nconst atEnd = createSelector(\n  ['currentWorkout.currentLiftIndex', 'currentWorkout.lifts'],\n  (index, lifts) => index === lifts.length - 1\n);\n\nconst atBeginning = createSelector(\n  ['currentWorkout.currentLiftIndex'],\n  index => index === 0\n);\n\nconst getHeaviestSet = createSelector(\n  ['currentWorkout.currentLiftIndex', 'currentWorkout.lifts'],\n  (index, lifts) => {\n    if (lifts[index].sets.length) {\n      return lifts[index].sets.reduce((setA, setB) => {\n        return setA.weight >= setB.weight ? setA : setB;\n      });\n    }\n  }\n);\n\nconst getEstimatedOneRepMax = createSelector(\n  [getHeaviestSet],\n  set => {\n    if (set && set.rpe >= 6.5) {\n      return calculateE1RM(set.weight, set.reps, set.rpe);\n    }\n  }\n);\n\nconst { actions, reducer } = currentWorkout;\n\n// Overwite generate actions with custom actions.\nactions.startRestTimer = startRestTimer;\n\n\nexport {\n  getSetsForCurrentLift,\n  getCurrentLiftIndex,\n  getCurrentLift,\n  atBeginning,\n  atEnd,\n  getEstimatedOneRepMax\n};\nexport { initialState, actions as currentWorkoutActions };\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}